!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ajah=e():t.ajah=e()}(this,function(){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e){"use strict";function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0});var o,n=function(){function t(t,e){var r=[],o=!0,n=!1,s=void 0;try{for(var u,i=t[Symbol.iterator]();!(o=(u=i.next()).done)&&(r.push(u.value),!e||r.length!==e);o=!0);}catch(t){n=!0,s=t}finally{try{!o&&i.return&&i.return()}finally{if(n)throw s}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=XMLHttpRequest.prototype.open,u=XMLHttpRequest.prototype.setRequestHeader,i=XMLHttpRequest.prototype.send,a={method:Symbol("method"),url:Symbol("url"),isAsync:Symbol("isAsync"),body:Symbol("body"),headers:Symbol("headers"),fn:{openInterceptor:Symbol("openInterceptor"),shouldOpen:Symbol("itShouldOpen"),shouldSend:Symbol("itShouldSend"),ShouldAbort:Symbol("itShouldAbort"),transformHeaders:Symbol("transformHeaders"),transformRequestBody:Symbol("transformRequestBody")}},l=(o={env:"prod",openInterceptor:function(t){return l[a.fn.openInterceptor]=t,this},itShouldOpen:function(t){return l[a.fn.shouldOpen]=t,this},itShouldSend:function(t){return l[a.fn.shouldSend]=t,this},itShouldAbort:function(t){return l[a.fn.itShouldAbort]=t,this},transformHeaders:function(t){return l[a.fn.transformHeaders]=t,this},transformRequestBody:function(t){return l[a.fn.transformRequestBody]=t,this},transformResponseBody:function(t){return l[a.fn.transformResponseBody]=t,this}},r(o,a.fn.shouldSend,function(t,e,r,o){return!0}),r(o,a.fn.openInterceptor,function(t,e,r){return arguments}),r(o,a.fn.itShouldAbort,function(t,e,r,o){return!1}),r(o,a.fn.transformHeaders,function(t,e,r,o){return o}),r(o,a.fn.transformRequestBody,function(t,e,r,o){return r}),r(o,a.fn.transformResponseBody,function(t,e,r,o,n){return n}),o);XMLHttpRequest.prototype.open=function(){var t=arguments[0],e=arguments[1],r=arguments[2];"dev"===l.env&&console.log("["+t+"]: "+e);var o=l[a.fn.openInterceptor],u=o.call(this,t,e,r)||[],i=n(u,3),d=i[0],f=i[1],p=i[2];this[a.method]=d||t,this[a.url]=f||e,this[a.isAsync]=p||r;var h=l[a.fn.shouldOpen],c=[this[a.method],this[a.url],this[a.isAsync]];try{var y=h.apply(this,c);if(y===!1)throw new Error("it should not open the serve");s.apply(this,c)}catch(t){console.error(t)}},XMLHttpRequest.prototype.setRequestHeader=function(){var t=arguments[0],e=arguments[1];this[a.headers]||(this[a.headers]={}),this[a.headers][t]=e,u.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){this[a.body]=arguments[0];var t=[this[a.method],this[a.url],this[a.body],this[a.headers]];try{var e=l[a.fn.shouldSend],r=l[a.fn.transformHeaders],o=l[a.fn.transformRequestBody],n=l[a.fn.itShouldAbort],s=e.call.apply(e,[this].concat(t));if(s===!1)console.error("Should Not Send: "+this[a.url]);else{var u=r.call.apply(r,[this].concat(t));for(var d in u)u.hasOwnProperty(d)&&this.setRequestHeader(d,u[d]);var f=o.call.apply(o,[this].concat(t))+"";i.apply(this,[f]);var p=n.call.apply(n,[this].concat(t));p===!0&&this.abort()}}catch(t){console.error(t)}},e.default=l}])});